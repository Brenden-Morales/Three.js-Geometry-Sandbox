<html>
    <head>
        <title>Three.js Editor Beta</title>

    </head>

    <!--Full screen body-->
    <style>
    body
    {
        margin: 0px;
        overflow: hidden;
    }
    #WindowOverlay
    {
        background-color: transparent;
        color: black;
        margin: 0;
        padding: 0;
        position: absolute;
        overflow: hidden;
        height:100%;
        width:100%;
        font-size:8pt;

    }
    </style>

    <body>
    <!--Third party libs-->
    <script src="three.js"></script>
    <script src="stats.min.js"></script>
    <!--jquery stuff-->
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
    <!--<link rel="stylesheet" type="text/css" href="http://code.jquery.com/ui/1.10.3/themes/ui-darkness/jquery-ui.css">-->
    <link rel="stylesheet" type="text/css" href="jquery-ui-1.10.3.custom/css/ui-darkness/jquery-ui-1.10.3.custom.css">

    <!--My Libs-->
    <script src="Helpers/UIManager.js"></script>
    <script src="Helpers/InputManager.js"></script>
    <script src="Helpers/RTSCamera.js"></script>
    <script src="Helpers/ObjectGrid.js"></script>
    <script src="Helpers/RightClickDialog.js"></script>
    <script src="Helpers/MovementHandle.js"></script>

    <!--div for popups and whatnot-->
    <div id="WindowOverlay"></div>
    
    <script>

    //global vars
    var stats;
    var Input;
    var scene;
    var RTS;
    var Grid;
    var ActiveObjects = [];

    var Plane;

    init();
    render();

    function init () {
        //stats
        stats = new Stats();
        stats.domElement.style.position = 'absolute';
        stats.domElement.style.top = '0px';
        document.body.appendChild( stats.domElement );

        //selecting a renderer to use
        renderer = new THREE.WebGLRenderer();
        renderer.sortObjects = false;
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        //setup input
        Input = new InputManager();

        //initialize scene and camera
        scene = new THREE.Scene;
        RTS = new RTSCamera(Input);

        //initialize Object Grid
        Grid = new ObjectGrid(scene);

        //make a cube
        var mat =  new THREE.MeshBasicMaterial( { color: 0xffaa00, wireframe: true } );
        var mesh = new THREE.Mesh( new THREE.CubeGeometry( 100, 100, 100, 4, 4, 4 ), mat );
        mesh.position.set( 0, 75, 0 );
        scene.add( mesh );
        ActiveObjects.push(mesh);

        //make a handle
        //var h = new MovementHandle();
        //scene.add(h.Handle);

        //create a test plane
        Plane = new THREE.Plane();
        Plane.setFromNormalAndCoplanarPoint(new THREE.Vector3(0,0,1), new THREE.Vector3(0,0,0));


        

        //set initial camera position
        scene.add(RTS.CameraHolder);
        RTS.CameraHolder.position.z = 200;
        RTS.CameraHolder.position.y = 75;
    }
    

    //render loop
    function render () {
        //update camera
        RTS.update();
        
        //update stats
        stats.update();

        requestAnimationFrame(render);
        renderer.render(scene, RTS.Camera);
    }
    


    function onWindowResize() {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize( window.innerWidth, window.innerHeight );

    }

    //listeners for events
    window.addEventListener( 'resize', onWindowResize, false );
    

    </script>
</body>
</html>
